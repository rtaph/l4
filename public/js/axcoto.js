// Generated by CoffeeScript 1.6.3
var App;

App = (function() {
  function App(name) {
    this.name = name;
    this.filterPortfolio();
    this.validateForm();
    $('img.lazy').unveil();
    this.animateFolio();
  }

  App.prototype.filterPortfolio = function() {
    var buttons, folioContainer, sFolio;
    buttons = $('#portfolio-nav li');
    folioContainer = $('#portfolio');
    sFolio = $('#portfolio-source');
    if ($("a.project-thumb[rel=portfolio]").length) {
      $("a.project-thumb[rel=portfolio]").colorbox({
        transition: "elastic",
        slideshow: true
      });
    }
    return buttons.click(function(e) {
      var s, type;
      e.preventDefault();
      s = $(this);
      buttons.removeClass('current');
      s.addClass('current');
      type = $('a', s.attr('class'));
      $('li', folioContainer).remove();
      return $('li.'.concat(type), sFolio).clone(true).sort(function() {
        return Math.round(Math.random() % 3) - 1;
      }).css({
        skew: ['10deg', '10deg'],
        scale: 0,
        position: 'absolute',
        top: '-100px',
        left: '-100px'
      }).appendTo(folioContainer).fadeIn('slow').animate({
        skew: ['0deg', '0deg'],
        top: '0',
        left: '0',
        scale: 1
      }, 200, function() {
        return $(this).css({
          position: 'relative'
        });
      });
    });
  };

  App.prototype.animateFolio = function() {
    var $folio;
    $folio = $('#portfolio');
    if (!$folio.length) {
      return false;
    }
    return $('li', $folio).hover(function() {
      var deg, direction;
      deg = Math.round(Math.random() * 10) % 3 + 1;
      direction = ['-', '+'];
      deg = direction[Math.round(Math.random() * 10) % 2].concat(deg, '0deg');
      return $(this).animate({
        rotate: deg,
        'z-index': 2
      }, 200, 'linear');
    }, function() {
      return $(this).animate({
        rotate: '0deg',
        'z-index': 0
      });
    });
  };

  App.prototype.validateForm = function() {
    var isContact;
    isContact = $('#email-contact-form').length;
    return isContact && $('#email-contact-form').submit(function() {
      var reg;
      $('.error').remove();
      if ($('#name').val() === '') {
        $('#name').after('<label class="error">Please enter your name</label>');
        return false;
      }
      reg = new RegExp("^[0-9a-zA-Z]+@[0-9a-zA-Z]+[\.]{1}[0-9a-zA-Z]+[\.]?[0-9a-zA-Z]+$");
      if ($('#email').val() === '' || !reg.test($('#email').val())) {
        $('#email').after('<label class="error">Please enter an valid email</label>');
        return false;
      }
      return true;
    });
  };

  return App;

})();

(function($) {
  if ($ == null) {
    $ = jQuery;
  }
  return $(document).ready(function() {
    return new App("frontpage");
  });
})();
